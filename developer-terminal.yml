---
- hosts: all
  roles:
  - role: osxc.packages
    brew_taps:
      - caskroom/fonts
      - thoughtbot/formulae
    brew_packages:
      - zsh
      - the_silver_searcher # Command line searcher
      - pick # Fuzzy finder command line tool to select options
      - asciinema # Record terminal sessions to asciinema.org
      - youtube-dl # media youtube downloader
      - ffmpeg # media converter
      - libav # media codecs
      - lame # media codecs
      - flac # media codecs
    cask_packages:
      - font-inconsolata
      - font-source-code-pro
      - font-sauce-code-powerline
  tasks:
    - name: Install zsh from repository
      git: repo=https://github.com/robbyrussell/oh-my-zsh.git dest=~/.oh-my-zsh/
    - name: Copy zshrc
      template: src=templates/zsh/zshrc dest=~/.zshrc
    - name: Copy zsh_aliases
      template: src=templates/zsh/zsh_aliases dest=~/.zsh_aliases
    - name: Make zsh as default terminal
      command: chsh -s /bin/zsh
    ## @todo Setup terminal Theme
    ## @todo symlink keys from dropbox
    - name: Ensure 600 for ~/.ssh/id_rsa
      command: chmod 600 ~/.ssh/id_rsa
    - name: Ensure 600 for ~/.ssh/id_rsa.pub
      command: chmod 600 ~/.ssh/id_rsa.pub
    - name: Ensure 600 for ~/.ssh/known_hosts
      command: chmod 600 ~/.ssh/known_hosts
    - name: Ensure 755 for ~/.ssh
      command: chmod 755 ~/.ssh
